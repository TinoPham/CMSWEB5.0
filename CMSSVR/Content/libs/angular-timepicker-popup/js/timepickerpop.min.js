angular.module("timepickerPop",["ui.bootstrap"]).factory("timepickerState",function(){var n=[];return{addPicker:function(t){n.push(t)},closeAll:function(){for(var t=0;t<n.length;t++)n[t].close()}}}).directive("timeFormat",function(n){return{restrict:"A",require:"ngModel",scope:{showMeridian:"="},link:function(t,i,r,u){var e=function(n){var r;if(n){if(angular.isDate(n)&&!isNaN(n))return u.$setValidity("time",!0),n;if(angular.isString(n)){if(r=/^(0?[0-9]|1[0-2]):[0-5][0-9] ?[a|p]m$/i,t.showMeridian||(r=/^([01]?[0-9]|2[0-3]):[0-5][0-9]$/),r.test(n)){u.$setValidity("time",!0);var f=new Date,i=n.split(":"),e=i[1].match(/[a|p]m/i);return e&&(i[1]=i[1].replace(/[a|p]m/i,""),e[0].toLowerCase()=="pm"&&(i[0]=i[0]+12)),f.setHours(i[0],i[1]),f}return u.$setValidity("time",!1),undefined}return u.$setValidity("time",!1),undefined}return u.$setValidity("time",!0),null},f;u.$parsers.push(e);f=function(i){e(i);var r=t.showMeridian?"hh:mm a":"HH:mm";return n("date")(i,r)};u.$formatters.push(f);t.$watch("showMeridian",function(){var n=u.$modelValue;n&&i.val(f(n))})}}}).directive("timepickerPop",function(n,t){return{restrict:"E",transclude:!1,scope:{inputTime:"=",showMeridian:"=",disabled:"=",changedEvent:"&"},controller:function(n){n.isOpen=!1;n.disabledInt=angular.isUndefined(n.disabled)?!1:n.disabled;n.toggle=function(){n.isOpen?n.close():n.open()}},link:function(i,r){var u={open:function(){t.closeAll();i.isOpen=!0},close:function(){i.isOpen=!1}};t.addPicker(u);i.open=u.open;i.close=u.close;i.$watch("disabled",function(){i.disabledInt=angular.isUndefined(i.disabled)?!1:i.disabled});i.$watch("inputTime",function(){i.inputTime?r.removeClass("has-error"):r.addClass("has-error")});r.bind("click",function(n){n.preventDefault();n.stopPropagation()});n.bind("click",function(){i.$apply(function(){i.isOpen=!1})})},template:"<input type='text' class='form-control back-white' ng-model='inputTime' ng-disabled='disabledInt' time-format show-meridian='showMeridian' readonly ng-focus='open()' />  <div class='input-group-btn' ng-class='{open:isOpen}'>     <button type='button' ng-disabled='disabledInt' class='btn btn-default ' ng-class=\"{'btn-primary':isOpen}\" data-toggle='dropdown' ng-click='toggle()'>         <i class='icon-clock'><\/i><\/button>           <div class='dropdown-menu pull-right'>             <timepicker ng-model='inputTime' ng-change='changedEvent()' show-meridian='showMeridian'><\/timepicker>            <\/div>   <\/div>"}});