define(["require","App"],function(n,t){var i=function(n,t,i,r,u,f){t.model={Trusted:!1,DBName:null,Server:null,UserID:null,Password:null};t.isDisabled=!0;t.tmp_model=angular.copy(t.model);t.str_Edit="Edit";t.str_Save="Save";t.str_TestConnection="Test Connection";t.edit=function(){t.isDisabled=!t.isDisabled;t.isDisabled?(t.model=angular.copy(t.tmp_model),t.str_Edit="Edit"):t.str_Edit="Canncel"};t.loadconfig=function(){n.isPaneShown=!0;f.GetDBConfig().then(function(i){t.model=i;t.tmp_model=angular.copy(t.model);n.isPaneShown=!1},function(){n.isPaneShown=!1},function(){n.isPaneShown=!1})};t.testconnection=function(t){n.isPaneShown=!0;n.dataB=1;f.TestDBConnection(t).then(function(t){u.error(t,n.dataB);n.isPaneShown=!1},function(t){u.error(t);n.isPaneShown=!1},function(t){u.error(t);n.isPaneShown=!1})};t.save=function(){t.DBConfig.$valid?(n.isPaneShown=!0,f.SetDBConnection(t.model).then(function(i){n.isPaneShown=!1;t.model=i;t.tmp_model=angular.copy(t.model)},function(){n.isPaneShown=!1},function(){n.isPaneShown=!1})):(t.Server.$valid=!1,u.error("There are invalid fields"))}};i.$inject=["$rootScope","$scope","$state","$stateParams","Dialogs","ApiService"];t.register.controller("DBController",i)});