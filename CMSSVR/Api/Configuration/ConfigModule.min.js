define(["require","angularAMD","ui.router","nggrid","ng.scrollabletable","ui.bootstraptpls","sanitize","Utils","Cookies","Base64","Dialogs","AccountController","ApiService"],function(n,t,i,r,u,f,e,o,s,h,c,l,a){var v=angular.module("app",["ui.router","ngGrid","scrollable-table","ui.bootstrap","ngSanitize"]);return v.factory("Utils",o),v.factory("Cookies",s),v.factory("Dialogs",c),v.factory("Base64",h),v.service("ApiService",a),v.controller("AccountController",l),v.config(["$controllerProvider","$compileProvider","$filterProvider","$provide","$stateProvider","$urlRouterProvider",function(n,i,r,u,f,e){var c,h;v.register={controller:n.register,directive:i.directive,filter:r.register,factory:u.factory,service:u.service};var o="/",s="/Api/Configuration/",l={name:"home",url:o+"home",templateUrl:"home.html"};f.state("home.database",t.route({url:o+"database",templateUrl:s+"dbConfig/dbConfig.html",controller:"DBController",controllerUrl:"DBController"}));c={name:"home.message",url:o+"messages",templateUrl:s+"DBConfig.html",controller:"DBController"};h={name:"home.logs",param:t.route({url:o+"logs",templateUrl:s+"Logs/Logs.html",controller:"LogsController",controllerUrl:"LogsController"})};f.state("home.service",t.route({url:o+"service",templateUrl:s+"ServiceConfig/ServiceConfig.html",controller:"svrconfig",controllerUrl:"ServiceConfigController"}));var a={name:"home.dvrs",url:o+"dvrs",templateUrl:s+"DVRInfo/DVRsInfo.html",controller:"DVRInfoController"},y={name:"login",url:o+"login",templateUrl:s+"account/login.html"},p={name:"register",templateUrl:s+"account/register.html",url:o+"register/:ret"};f.state(l).state(y).state(p).state(c).state(h.name,h.param).state(a);e.otherwise("/login")}]),v.run(["$rootScope","$state","$stateParams","$location","$q",function(n,t,i){n.$state=t;n.$stateParams=i;n.$on("$stateChangeStart",function(i,r,u,f){console.log("from: "+f.name+" to: "+r.name);r.name!="login"&&r.name!="register"&&(n.UserInfo==null||n.UserInfo.authenticated==!1)&&(i.preventDefault(),t.go("login"))});n.$on("$stateChangeSuccess",function(n,t,i,r){console.log("from: "+r.name+" to: "+t.name)});n.$on("$stateNotFound",function(){t.go("home")})}]),angular.bootstrap(document,["app"]),v});