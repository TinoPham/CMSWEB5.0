(function(n){"use strict";typeof define=="function"&&define.amd?define(n):typeof module!="undefined"&&typeof module.exports!="undefined"?module.exports=n():typeof Package!="undefined"?Sortable=n():window.Sortable=n()})(function(){"use strict";function c(n,t){var e,r,i,u;this.el=n;this.options=t=bt({},t);n[k]=this;e={group:Math.random(),sort:!0,disabled:!1,store:null,handle:null,scroll:!0,scrollSensitivity:30,scrollSpeed:10,draggable:/[uo]l/i.test(n.nodeName)?"li":">*",ghostClass:"sortable-ghost",ignore:"a, img",filter:null,animation:0,setData:function(n,t){n.setData("Text",t.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0};for(r in e)r in t||(t[r]=e[r]);i=t.group;i&&typeof i=="object"||(i=t.group={name:i});["pull","put"].forEach(function(n){n in i||(i[n]=!0)});t.groups=" "+i.name+(i.put.join?" "+i.put.join(" "):"")+" ";for(u in this)u.charAt(0)==="_"&&(this[u]=at(this,this[u]));f(n,"mousedown",this._onTapStart);f(n,"touchstart",this._onTapStart);f(n,"dragover",this);f(n,"dragenter",this);nt.push(this._onDragOver);t.store&&this.sort(t.store.get(this))}function ot(r){e&&e.state!==r&&(i(e,"display",r?"none":""),!r&&e.state&&t.insertBefore(e,n),e.state=r)}function at(n,t){var i=lt.call(arguments,2);return t.bind?t.bind.apply(t,[n].concat(i)):function(){return t.apply(n,i.concat(lt.call(arguments)))}}function y(n,t,i){if(n){i=i||u;t=t.split(".");var r=t.shift().toUpperCase(),f=new RegExp("\\s("+t.join("|")+")\\s","g");do if(r===">*"&&n.parentNode===i||(r===""||n.nodeName.toUpperCase()==r)&&(!t.length||((" "+n.className+" ").match(f)||[]).length==t.length))return n;while(n!==i&&(n=n.parentNode))}return null}function gt(n){n.dataTransfer.dropEffect="move";n.preventDefault()}function f(n,t,i){n.addEventListener(t,i,!1)}function o(n,t,i){n.removeEventListener(t,i,!1)}function st(n,t,i){if(n)if(n.classList)n.classList[i?"add":"remove"](t);else{var r=(" "+n.className+" ").replace(ht," ").replace(" "+t+" "," ");n.className=(r+(i?" "+t:"")).replace(ht," ")}}function i(n,t,i){var r=n&&n.style;if(r){if(i===void 0)return u.defaultView&&u.defaultView.getComputedStyle?i=u.defaultView.getComputedStyle(n,""):n.currentStyle&&(i=n.currentStyle),t===void 0?i:i[t];t in r||(t="-webkit-"+t);r[t]=i+(typeof i=="string"?"":"px")}}function vt(n,t,i){if(n){var u=n.getElementsByTagName(t),r=0,f=u.length;if(i)for(;r<f;r++)i(u[r],r);return u}return[]}function l(n,t,i,r,f,o,s){var h=u.createEvent("Event"),c=(n||t[k]).options,l="on"+i.charAt(0).toUpperCase()+i.substr(1);h.initEvent(i,!0,!0);h.to=t;h.from=f||t;h.item=r||t;h.clone=e;h.oldIndex=o;h.newIndex=s;c[l]&&c[l].call(n,h);t.dispatchEvent(h)}function yt(n,t,i,r,f,e){var o,s=n[k],h=s.options.onMove,c;return h&&(o=u.createEvent("Event"),o.initEvent("move",!0,!0),o.to=t,o.from=n,o.dragged=i,o.draggedRect=r,o.related=f||t,o.relatedRect=e||t.getBoundingClientRect(),c=h.call(s,o)),c}function pt(n){n.draggable=!1}function ni(){et=!1}function ti(n,t){var i=n.lastElementChild,r=i.getBoundingClientRect();return t.clientY-(r.top+r.height)>5&&i}function ii(n){for(var t=n.tagName+n.className+n.src+n.href+n.textContent,i=t.length,r=0;i--;)r+=t.charCodeAt(i);return r.toString(36)}function rt(n){for(var t=0;n&&(n=n.previousElementSibling);)n.nodeName.toUpperCase()!=="TEMPLATE"&&t++;return t}function wt(n,t){var i,r;return function(){i===void 0&&(i=arguments,r=this,setTimeout(function(){i.length===1?n.call(r,i[0]):n.apply(r,i);i=void 0},t))}}function bt(n,t){if(n&&t)for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);return n}var n,r,e,t,g,s,ut,ft,tt,h,a,p,v={},w,b,ht=/\s+/g,k="Sortable"+(new Date).getTime(),d=window,u=d.document,ct=d.parseInt,kt=!!("draggable"in u.createElement("div")),et=!1,it=Math.abs,lt=[].slice,nt=[],dt=wt(function(n,t,i){if(i&&t.scroll){var f,o,e=t.scrollSensitivity,h=t.scrollSpeed,c=n.clientX,l=n.clientY,a=window.innerWidth,y=window.innerHeight,r,u;if(ut!==i&&(s=t.scroll,ut=i,s===!0)){s=i;do if(s.offsetWidth<s.scrollWidth||s.offsetHeight<s.scrollHeight)break;while(s=s.parentNode)}s&&(f=s,o=s.getBoundingClientRect(),r=(it(o.right-c)<=e)-(it(o.left-c)<=e),u=(it(o.bottom-l)<=e)-(it(o.top-l)<=e));r||u||(r=(a-c<=e)-(c<=e),u=(y-l<=e)-(l<=e),(r||u)&&(f=d));(v.vx!==r||v.vy!==u||v.el!==f)&&(v.el=f,v.vx=r,v.vy=u,clearInterval(v.pid),f&&(v.pid=setInterval(function(){f===d?d.scrollTo(d.pageXOffset+r*h,d.pageYOffset+u*h):(u&&(f.scrollTop+=u*h),r&&(f.scrollLeft+=r*h))},24)))}},30);return c.prototype={constructor:c,_onTapStart:function(n){var e=this,r=this.el,u=this.options,s=n.type,o=n.touches&&n.touches[0],t=(o||n).target,f=t,i=u.filter;if((s!=="mousedown"||n.button===0)&&!u.disabled&&(t=y(t,u.draggable,r),t)){if(h=rt(t),typeof i=="function"){if(i.call(this,n,t,this)){l(e,f,"filter",t,r,h);n.preventDefault();return}}else if(i&&(i=i.split(",").some(function(n){return n=y(f,n.trim(),r),n?(l(e,n,"filter",t,r,h),!0):void 0}),i)){n.preventDefault();return}(!u.handle||y(f,u.handle,r))&&this._prepareDragStart(n,o,t)}},_prepareDragStart:function(i,r,u){var e=this,h=e.el,s=e.options,o=h.ownerDocument,c;u&&!n&&u.parentNode===h&&(w=i,t=h,n=u,g=n.nextSibling,p=s.group,c=function(){e._disableDelayedDrag();n.draggable=!0;s.ignore.split(",").forEach(function(t){vt(n,t.trim(),pt)});e._triggerDragStart(r)},f(o,"mouseup",e._onDrop),f(o,"touchend",e._onDrop),f(o,"touchcancel",e._onDrop),s.delay?(f(o,"mousemove",e._disableDelayedDrag),f(o,"touchmove",e._disableDelayedDrag),e._dragStartTimer=setTimeout(c,s.delay)):c())},_disableDelayedDrag:function(){var n=this.el.ownerDocument;clearTimeout(this._dragStartTimer);o(n,"mousemove",this._disableDelayedDrag);o(n,"touchmove",this._disableDelayedDrag)},_triggerDragStart:function(i){i?(w={target:n,clientX:i.clientX,clientY:i.clientY},this._onDragStart(w,"touch")):kt?(f(n,"dragend",this),f(t,"dragstart",this._onDragStart)):this._onDragStart(w,!0);try{u.selection?u.selection.empty():window.getSelection().removeAllRanges()}catch(r){}},_dragStarted:function(){t&&n&&(st(n,this.options.ghostClass,!0),c.active=this,l(this,t,"start",n,t,h))},_emulateDragOver:function(){if(b){i(r,"display","none");var t=u.elementFromPoint(b.clientX,b.clientY),n=t,e=" "+this.options.group.name+"",f=nt.length;if(n)do{if(n[k]&&n[k].options.groups.indexOf(e)>-1){while(f--)nt[f]({clientX:b.clientX,clientY:b.clientY,target:t,rootEl:n});break}t=n}while(n=n.parentNode);i(r,"display","")}},_onTouchMove:function(n){if(w){var u=n.touches?n.touches[0]:n,f=u.clientX-w.clientX,e=u.clientY-w.clientY,t=n.touches?"translate3d("+f+"px,"+e+"px,0)":"translate("+f+"px,"+e+"px)";b=u;i(r,"webkitTransform",t);i(r,"mozTransform",t);i(r,"msTransform",t);i(r,"transform",t);n.preventDefault()}},_onDragStart:function(o,s){var c=o.dataTransfer,v=this.options,h,l,a;this._offUpEvents();p.pull=="clone"&&(e=n.cloneNode(!0),i(e,"display","none"),t.insertBefore(e,n));s?(h=n.getBoundingClientRect(),l=i(n),r=n.cloneNode(!0),i(r,"top",h.top-ct(l.marginTop,10)),i(r,"left",h.left-ct(l.marginLeft,10)),i(r,"width",h.width),i(r,"height",h.height),i(r,"opacity","0.8"),i(r,"position","fixed"),i(r,"zIndex","100000"),t.appendChild(r),a=r.getBoundingClientRect(),i(r,"width",h.width*2-a.width),i(r,"height",h.height*2-a.height),s==="touch"?(f(u,"touchmove",this._onTouchMove),f(u,"touchend",this._onDrop),f(u,"touchcancel",this._onDrop)):(f(u,"mousemove",this._onTouchMove),f(u,"mouseup",this._onDrop)),this._loopId=setInterval(this._emulateDragOver,150)):(c&&(c.effectAllowed="move",v.setData&&v.setData.call(this,c,n)),f(u,"drop",this));setTimeout(this._dragStarted,0)},_onDragOver:function(u){var s=this.el,f,c,nt,h=this.options,a=h.group,v=a.put,w=p===a,it=h.sort;if(u.preventDefault!==void 0&&(u.preventDefault(),h.dragoverBubble||u.stopPropagation()),p&&!h.disabled&&(w?it||(nt=!t.contains(n)):p.pull&&v&&(p.name===a.name||v.indexOf&&~v.indexOf(p.name)))&&(u.rootEl===void 0||u.rootEl===this.el)){if(dt(u,h,this.el),et)return;if(f=y(u.target,h.draggable,s),c=n.getBoundingClientRect(),nt){ot(!0);e||g?t.insertBefore(n,e||g):it||t.appendChild(n);return}if(s.children.length===0||s.children[0]===r||s===u.target&&(f=ti(s,u))){if(f){if(f.animated)return;o=f.getBoundingClientRect()}ot(w);yt(t,s,n,c,f,o)!==!1&&(s.appendChild(n),this._animate(c,n),f&&this._animate(o,f))}else if(f&&!f.animated&&f!==n&&f.parentNode[k]!==void 0){ft!==f&&(ft=f,tt=i(f));var o=f.getBoundingClientRect(),ct=o.right-o.left,lt=o.bottom-o.top,rt=/left|right|inline/.test(tt.cssFloat+tt.display),ut=f.offsetWidth>n.offsetWidth,st=f.offsetHeight>n.offsetHeight,ht=(rt?(u.clientX-o.left)/ct:(u.clientY-o.top)/lt)>.5,b=f.nextElementSibling,l=yt(t,s,n,c,f,o),d;l!==!1&&(et=!0,setTimeout(ni,30),ot(w),d=l===1||l===-1?l===1:rt?f.previousElementSibling===n&&!ut||ht&&ut:b!==n&&!st||ht&&st,d&&!b?s.appendChild(n):f.parentNode.insertBefore(n,d?b:f),this._animate(c,n),this._animate(o,f))}}},_animate:function(n,t){var r=this.options.animation,u;r&&(u=t.getBoundingClientRect(),i(t,"transition","none"),i(t,"transform","translate3d("+(n.left-u.left)+"px,"+(n.top-u.top)+"px,0)"),t.offsetWidth,i(t,"transition","all "+r+"ms"),i(t,"transform","translate3d(0,0,0)"),clearTimeout(t.animated),t.animated=setTimeout(function(){i(t,"transition","");i(t,"transform","");t.animated=!1},r))},_offUpEvents:function(){var n=this.el.ownerDocument;o(u,"touchmove",this._onTouchMove);o(n,"mouseup",this._onDrop);o(n,"touchend",this._onDrop);o(n,"touchcancel",this._onDrop)},_onDrop:function(i){var f=this.el,y=this.options;clearInterval(this._loopId);clearInterval(v.pid);clearTimeout(this.dragStartTimer);o(u,"drop",this);o(u,"mousemove",this._onTouchMove);o(f,"dragstart",this._onDragStart);this._offUpEvents();i&&(i.preventDefault(),y.dropBubble||i.stopPropagation(),r&&r.parentNode.removeChild(r),n&&(o(n,"dragend",this),pt(n),st(n,this.options.ghostClass,!1),t!==n.parentNode?(a=rt(n),l(null,n.parentNode,"sort",n,t,h,a),l(this,t,"sort",n,t,h,a),l(null,n.parentNode,"add",n,t,h,a),l(this,t,"remove",n,t,h,a)):(e&&e.parentNode.removeChild(e),n.nextSibling!==g&&(a=rt(n),l(this,t,"update",n,t,h,a),l(this,t,"sort",n,t,h,a))),c.active&&(l(this,t,"end",n,t,h,a),this.save())),t=n=r=g=e=s=ut=w=b=ft=tt=p=c.active=null)},handleEvent:function(t){var i=t.type;i==="dragover"||i==="dragenter"?n&&(this._onDragOver(t),gt(t)):(i==="drop"||i==="dragend")&&this._onDrop(t)},toArray:function(){for(var i=[],n,r=this.el.children,t=0,f=r.length,u=this.options;t<f;t++)n=r[t],y(n,u.draggable,this.el)&&i.push(n.getAttribute(u.dataIdAttr)||ii(n));return i},sort:function(n){var t={},i=this.el;this.toArray().forEach(function(n,r){var u=i.children[r];y(u,this.options.draggable,i)&&(t[n]=u)},this);n.forEach(function(n){t[n]&&(i.removeChild(t[n]),i.appendChild(t[n]))})},save:function(){var n=this.options.store;n&&n.set(this)},closest:function(n,t){return y(n,t||this.options.draggable,this.el)},option:function(n,t){var i=this.options;if(t===void 0)return i[n];i[n]=t},destroy:function(){var n=this.el;n[k]=null;o(n,"mousedown",this._onTapStart);o(n,"touchstart",this._onTapStart);o(n,"dragover",this);o(n,"dragenter",this);Array.prototype.forEach.call(n.querySelectorAll("[draggable]"),function(n){n.removeAttribute("draggable")});nt.splice(nt.indexOf(this._onDragOver),1);this._onDrop();this.el=n=null}},c.utils={on:f,off:o,css:i,find:vt,bind:at,is:function(n,t){return!!y(n,t,n)},extend:bt,throttle:wt,closest:y,toggleClass:st,index:rt},c.version="1.2.0",c.create=function(n,t){return new c(n,t)},c});