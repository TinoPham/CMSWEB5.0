(function(){function s(n,t){window.XMLHttpRequest.prototype[n]=t(window.XMLHttpRequest.prototype[n])}function h(t,i,r,e,o,s){function c(){return i[0].tagName.toLowerCase()==="input"&&i.attr("type")&&i.attr("type").toLowerCase()==="file"}function l(i){var l;if(!h){h=!0;try{var a=i.__files_||i.target&&i.target.files,c=[],v=[],y=o(r.ngAccept);for(n=0;n<a.length;n++)l=a.item(n),f(t,y,l,i)?c.push(l):v.push(l);u(o,s,t,e,r,r.ngFileChange||r.ngFileSelect,c,v,i);c.length==0&&(i.target.value=c);i.target&&i.target.getAttribute("__ngf_gen__")&&angular.element(i.target).remove()}finally{h=!1}}}function p(n){r.ngMultiple&&n.attr("multiple",o(r.ngMultiple)(t));r.accept&&n.attr("accept",r.accept);r.ngCapture&&n.attr("capture",o(r.ngCapture)(t));r.ngDisabled&&n.attr("disabled",o(r.ngDisabled)(t));n.bind("change",l)}function a(){var n,t,r;if(!i.attr("disabled")){for(n=angular.element('<input type="file">'),t=0;t<i[0].attributes.length;t++)r=i[0].attributes[t],r.name!=="type"&&n.attr(r.name,r.value);return c()?(i.replaceWith(n),i=n):(n.css("width","0px").css("height","0px").css("position","absolute").css("padding",0).css("margin",0).css("overflow","hidden").attr("tabindex","-1").css("opacity",0).attr("__ngf_gen__",!0),i.__ngf_ref_elem__&&i.__ngf_ref_elem__.remove(),i.__ngf_ref_elem__=n,i.parent()[0].insertBefore(n[0],i[0]),i.css("overflow","hidden")),p(n),n}}function v(n){u(o,s,t,e,r,r.ngFileChange||r.ngFileSelect,[],[],n,!0)}function y(n){var t=a(n);t&&(v(n),t[0].click());c()&&(i.bind("click",y),n.preventDefault())}var h=!1;window.FileAPI&&window.FileAPI.ngfFixIE?window.FileAPI.ngfFixIE(i,a,l,v):i.bind("click",y)}function c(t,i,e,o,s,h,c){function k(t,i,r){var o=!0,e=r.dataTransfer.items,u;if(e!=null)for(n=0;n<e.length&&o;n++)o=o&&(e[n].kind=="file"||e[n].kind=="")&&f(t,b,e[n],r);return u=s(i.dragOverClass)(t,{$event:r}),u&&(u.delay&&(w=u.delay),u.accept&&(u=o?u.accept:u.reject)),u||i.dragOverClass||"dragover"}function d(i,r,u,e){function a(n){f(t,b,n,i)?o.push(n):w.push(n)}function d(t,i,r){var e,o,u,f;i!=null&&(i.isDirectory?(e=(r||"")+i.name,a({name:i.name,type:"directory",path:e}),o=i.createReader(),u=[],s++,f=function(){o.readEntries(function(e){try{if(e.length)u=u.concat(Array.prototype.slice.call(e||[],0)),f();else{for(n=0;n<u.length;n++)d(t,u[n],(r?r:"")+i.name+"/");s--}}catch(o){s--;console.error(o)}},function(){s--})},f()):(s++,i.file(function(n){try{s--;n.path=(r?r:"")+n.name;a(n)}catch(t){s--;console.error(t)}},function(){s--})))}var o=[],w=[],l=i.dataTransfer.items,s=0,v,p,y,k;if(l&&l.length>0&&c.protocol()!="file")for(n=0;n<l.length;n++){if(l[n].webkitGetAsEntry&&l[n].webkitGetAsEntry()&&l[n].webkitGetAsEntry().isDirectory){if(v=l[n].webkitGetAsEntry(),v.isDirectory&&!u)continue;v!=null&&d(o,v)}else p=l[n].getAsFile(),p!=null&&a(p);if(!e&&o.length>0)break}else if(y=i.dataTransfer.files,y!=null)for(n=0;n<y.length;n++)if(a(y.item(n)),!e&&o.length>0)break;k=0,function g(t){h(function(){if(s)k++*10<2e4&&g(10);else{if(!e&&o.length>1){for(n=0;o[n].type=="directory";)n++;o=[o[n]]}r(o,w)}},t||0)}()}var v=r();if(e.dropAvailable&&h(function(){t.dropAvailable?t.dropAvailable.value=v:t.dropAvailable=v}),!v){s(e.hideOnDropNotAvailable)(t)==!0&&i.css("display","none");return}var p=null,y=s(e.stopPropagation),w=1,b=s(e.ngAccept),a=s(e.ngDisabled),l;i[0].addEventListener("dragover",function(n){if(!a(t)){if(n.preventDefault(),y(t)&&n.stopPropagation(),navigator.userAgent.indexOf("Chrome")>-1){var r=n.dataTransfer.effectAllowed;n.dataTransfer.dropEffect="move"===r||"linkMove"===r?"move":"copy"}h.cancel(p);t.actualDragOverClass||(l=k(t,e,n));i.addClass(l)}},!1);i[0].addEventListener("dragenter",function(n){a(t)||(n.preventDefault(),y(t)&&n.stopPropagation())},!1);i[0].addEventListener("dragleave",function(){a(t)||(p=h(function(){i.removeClass(l);l=null},w||1))},!1);i[0].addEventListener("drop",function(n){a(t)||(n.preventDefault(),y(t)&&n.stopPropagation(),i.removeClass(l),l=null,d(n,function(i,r){u(s,h,t,o,e,e.ngFileChange||e.ngFileDrop,i,r,n)},s(e.allowDir)(t)!=!1,e.multiple||s(e.ngMultiple)(t)))},!1)}function r(){var n=document.createElement("div");return"draggable"in n&&"ondrop"in n}function u(n,t,i,r,u,f,e,o,s,h){function c(){r&&(n(u.ngModel).assign(i,e),t(function(){r&&r.$setViewValue(e!=null&&e.length==0?null:e)}));u.ngModelRejected&&n(u.ngModelRejected).assign(i,o);f&&n(f)(i,{$files:e,$rejectedFiles:o,$event:s})}h?c():t(function(){c()})}function f(n,t,i,r){var u=t(n,{$file:i,$event:r}),f;return u==null?!0:(angular.isString(u)&&(f=new RegExp(e(u),"gi"),u=i.type!=null&&i.type.match(f)||i.name!=null&&i.name.match(f)),u)}function e(t){if(t.length>2&&t[0]==="/"&&t[t.length-1]==="/")return t.substring(1,t.length-1);var r=t.split(","),i="";if(r.length>1)for(n=0;n<r.length;n++)i+="("+e(r[n])+")",n<r.length-1&&(i+="|");else t.indexOf(".")==0&&(t="*"+t),i="^"+t.replace(new RegExp("[.\\\\+*?\\[\\^\\]$(){}=!<>|:\\-]","g"),"\\$&")+"$",i=i.replace(/\\\*/g,".*").replace(/\\\?/g,".");return i}var t,n,i,o;window.XMLHttpRequest&&!window.XMLHttpRequest.__isFileAPIShim&&s("setRequestHeader",function(n){return function(t,i){if(t==="__setXHR_"){var r=i(this);r instanceof Function&&r(this)}else n.apply(this,arguments)}});i=angular.module("angularFileUpload",[]);i.version="3.2.5";i.service("$upload",["$http","$q","$timeout",function(i,r,u){function f(n){n.method=n.method||"POST";n.headers=n.headers||{};n.transformRequest=n.transformRequest||function(n,t){return window.ArrayBuffer&&n instanceof window.ArrayBuffer?n:i.defaults.transformRequest[0](n,t)};var f=r.defer(),t=f.promise;return n.headers.__setXHR_=function(){return function(i){i&&(n.__XHR=i,n.xhrFn&&n.xhrFn(i),i.upload.addEventListener("progress",function(i){i.config=n;f.notify?f.notify(i):t.progress_fn&&u(function(){t.progress_fn(i)})},!1),i.upload.addEventListener("load",function(i){i.lengthComputable&&(i.config=n,f.notify?f.notify(i):t.progress_fn&&u(function(){t.progress_fn(i)}))},!1))}},i(n).then(function(n){f.resolve(n)},function(n){f.reject(n)},function(n){f.notify(n)}),t.success=function(i){return t.then(function(t){i(t.data,t.status,t.headers,n)}),t},t.error=function(i){return t.then(null,function(t){i(t.data,t.status,t.headers,n)}),t},t.progress=function(n){return t.progress_fn=n,t.then(null,null,function(t){n(t)}),t},t.abort=function(){return n.__XHR&&u(function(){n.__XHR.abort()}),t},t.xhr=function(i){return n.xhrFn=function(n){return function(){n&&n.apply(t,arguments);i.apply(t,arguments)}}(n.xhrFn),t},t}this.upload=function(i){return i.headers=i.headers||{},i.headers["Content-Type"]=undefined,i.transformRequest=i.transformRequest?Object.prototype.toString.call(i.transformRequest)==="[object Array]"?i.transformRequest:[i.transformRequest]:[],i.transformRequest.push(function(r){var f=new FormData,u={},e,o,s;for(t in i.fields)i.fields.hasOwnProperty(t)&&(u[t]=i.fields[t]);if(r&&(u.data=r),i.formDataAppender)for(t in u)u.hasOwnProperty(t)&&i.formDataAppender(f,t,u[t]);else for(t in u)u.hasOwnProperty(t)&&(e=u[t],e!==undefined&&(Object.prototype.toString.call(e)==="[object String]"?f.append(t,e):i.sendObjectsAsJsonBlob&&typeof e=="object"?f.append(t,new Blob([e],{type:"application/json"})):f.append(t,JSON.stringify(e))));if(i.file!=null)if(o=i.fileFormDataName||"file",Object.prototype.toString.call(i.file)==="[object Array]")for(s=Object.prototype.toString.call(o)==="[object String]",n=0;n<i.file.length;n++)f.append(s?o:o[n],i.file[n],i.fileName&&i.fileName[n]||i.file[n].name);else f.append(o,i.file,i.fileName||i.file.name);return f}),f(i)};this.http=function(n){return f(n)}}]);i.directive("ngFileSelect",["$parse","$timeout","$compile",function(n,t,i){return{restrict:"AEC",require:"?ngModel",link:function(r,u,f,e){h(r,u,f,e,n,t,i)}}}]);i.directive("ngFileDrop",["$parse","$timeout","$location",function(n,t,i){return{restrict:"AEC",require:"?ngModel",link:function(r,u,f,e){c(r,u,f,e,n,t,i)}}}]);i.directive("ngNoFileDrop",function(){return function(n,t){r()&&t.css("display","none")}});i.directive("ngFileDropAvailable",["$parse","$timeout",function(n,t){return function(i,u,f){if(r()){var e=n(f.ngFileDropAvailable);t(function(){e(i)})}}}]);o=angular.module("ngFileUpload",[]);for(t in i)i.hasOwnProperty(t)&&(o[t]=i[t])})();
/*
//# sourceMappingURL=angular-file-upload.min.js.map
*/